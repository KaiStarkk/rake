~~ Test file for over loop syntax

stack Ray {
  ox: float rack, oy: float rack, oz: float rack,
  dx: float rack, dy: float rack, dz: float rack
}

single Sphere {
  cx: float, cy: float, cz: float, r: float
}

~~ Simple crunch for testing
crunch dot ax ay az bx by bz -> d:
  d <- ax * bx + ay * by + az * bz

~~ Run function with over loop
run process_rays (rays : Ray pack) (<count> : int64) (<sphere> : Sphere single) -> result:
  over rays, <count> |> chunk:
    let t = dot(chunk.ox, chunk.oy, chunk.oz, chunk.dx, chunk.dy, chunk.dz)
    t
